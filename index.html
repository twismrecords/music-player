<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KINGXREEK Playlist</title>
<style>
body { font-family:"Poppins",sans-serif; background:#0d001a; color:#fff; display:flex; justify-content:center; align-items:flex-start; min-height:100vh; margin:0; padding:20px; }
.card { width:480px; background:#1a0033; padding:20px; border-radius:20px; box-shadow:0 0 25px rgba(128,0,255,0.4); position:relative; }
img { width:100%; border-radius:16px; margin-bottom:20px; object-fit:cover; box-shadow:0 0 25px rgba(128,0,255,0.6); }
h1 { text-align:center; margin-bottom:20px; color:#bb86fc; text-shadow:0 0 8px rgba(128,0,255,0.7); }

/* 3-dot menu */
.menu-btn { position:absolute; top:20px; right:20px; background:#8000FF; border:none; color:#fff; font-size:28px; padding:6px 10px; border-radius:50%; cursor:pointer; box-shadow:0 0 10px #bb86fc; }
.menu-content { display:none; position:absolute; top:60px; right:20px; background:#1a0033; border-radius:10px; padding:10px; box-shadow:0 0 15px rgba(128,0,255,0.6); z-index:10; }
.menu-content button { display:block; width:100%; margin:5px 0; font-weight:600; padding:8px 12px; border-radius:8px; background:#bb86fc; color:#000; border:none; cursor:pointer; transition:all 0.2s ease; }
.menu-content button:hover { background:#d3a1ff; }

/* Modal styles */
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); justify-content:center; align-items:center; z-index:20; }
.modal-content { background:#1a0033; padding:20px; border-radius:15px; width:90%; max-width:400px; text-align:center; box-shadow:0 0 20px #8000FF; }
.modal-content h2 { margin-top:0; color:#bb86fc; }
.modal-content input { width:90%; padding:8px; margin:8px 0; border-radius:8px; border:none; }
.modal-content button { margin-top:10px; width:50%; padding:10px; border:none; border-radius:10px; font-weight:700; background:#bb86fc; color:#000; cursor:pointer; transition:all 0.2s ease; }
.modal-content button:hover { background:#d3a1ff; }
.modal-content label { display:flex; align-items:center; justify-content:center; gap:6px; margin-top:8px; font-size:14px; }

/* Music player */
.controls { margin-bottom:18px; display:flex; flex-direction:column; align-items:center; gap:10px; }
.buttons { display:flex; justify-content:center; flex-wrap:wrap; gap:8px; }
button.music-btn { background:#bb86fc; border:none; color:#000; font-weight:600; padding:8px 12px; border-radius:8px; cursor:pointer; transition:all 0.2s ease; box-shadow:0 0 8px rgba(128,0,255,0.6); }
button.music-btn:hover { background:#d3a1ff; transform:scale(1.05); }
.now-playing { background:#240046; padding:15px; border-radius:15px; margin-bottom:15px; box-shadow:0 0 15px rgba(128,0,255,0.4); width:100%; text-align:center; transition:all 0.3s ease-in-out; }
.now-playing.active { box-shadow:0 0 18px #a64dff; background:#30005a; }
.now-playing h2 { margin:0; font-size:16px; color:#bb86fc; font-weight:700; }
.now-playing p { margin:4px 0 8px; font-size:14px; color:#fff; }
.slider-row { display:flex; align-items:center; justify-content:space-between; gap:10px; width:100%; }
.progress-container { display:flex; align-items:center; flex:1; gap:8px; }
#progress { flex:1; height:6px; border-radius:4px; appearance:none; background:linear-gradient(to right,#8000FF 0%,#333 0%); outline:none; cursor:pointer; transition:background 0.2s; }
#progress::-webkit-slider-thumb { appearance:none; height:12px; width:12px; border-radius:50%; background:#fff; border:2px solid #8000FF; cursor:pointer; margin-top:-3px; }
#volume { width:70px; accent-color:#8000FF; cursor:pointer; }
.time { font-size:12px; color:#aaa; width:40px; text-align:center; }
#playlist { max-height:250px; overflow-y:auto; background:#120024; border-radius:10px; padding:10px; box-shadow:inset 0 0 10px rgba(128,0,255,0.2); }
.track { margin:8px 0; padding:10px; border-radius:8px; background:#1a1a1a; display:flex; justify-content:space-between; align-items:center; transition:all 0.3s ease-in-out; }
.track:hover { background:#2a2a2a; box-shadow:0 0 8px #8000FF40; }
.track.active { background:#2a0033; box-shadow:0 0 16px #8000FFAA; transform:scale(1.02); }
.track button { pointer-events:auto; opacity:1; }
</style>
</head>
<body>
<div class="card">
<img src="Cover.JPG" alt="Cover">
<h1>KINGXREEK Playlist</h1>

<!-- Three-dot menu -->
<button class="menu-btn" id="menuBtn">‚ãÆ</button>
<div class="menu-content" id="menuContent">
  <button id="signupBtn">Sign Up</button>
  <button id="loginBtn">Login</button>
</div>

<div class="controls">
  <div class="buttons">
    <button class="music-btn" onclick="prev()">‚èÆ Prev</button>
    <button class="music-btn" onclick="toggle()">‚ñ∂Ô∏è / ‚è∏</button>
    <button class="music-btn" onclick="next()">‚è≠ Next</button>
    <button class="music-btn" onclick="shuffle()">üîÄ Shuffle</button>
    <button class="music-btn" onclick="loop()">üîÅ Repeat</button>
  </div>
  <div class="now-playing" id="nowPlaying">
    <h2>KINGXREEK</h2>
    <p id="songTitle">Loading...</p>
    <div class="slider-row">
      <div class="progress-container">
        <span class="time" id="currentTime">0:00</span>
        <input type="range" id="progress" min="0" max="100" value="0">
        <span class="time" id="duration">0:00</span>
      </div>
      <input type="range" id="volume" min="0" max="1" step="0.01" value="1">
    </div>
  </div>
</div>

<div id="playlist"></div>
<audio id="player"></audio>
</div>

<!-- Modal -->
<div class="modal" id="authModal">
  <div class="modal-content" id="modalContent">
    <!-- Content populated by JS -->
  </div>
</div>

<script>
// ===== Songs array =====
const songs = [
  {title:"Been Waiting", file:"Been_Waiting.mp3"},
  {title:"The Marina", file:"The_Marina.mp3"},
  {title:"What It Wasn't", file:"What_It_Wasnt.mp3"},
  {title:"Put Me In Coach", file:"Put_Me_In_Coach.mp3"},
  {title:"Attachments", file:"Attachments.mp3"},
  {title:"Gangsta", file:"Gangsta.mp3"},
  {title:"Abuntu", file:"Abuntu.mp3"},
  {title:"Places They Can't Go", file:"Places_They_Cant_Go.mp3"},
  {title:"Mdali", file:"Mdali.mp3"},
  {title:"Bawo", file:"Bawo.mp3"},
  {title:"Black Magic", file:"Black_Magic.mp3"},
  {title:"Thinking Out Loud", file:"Thinking_Out_Loud.mp3"}
];

const playlistDiv = document.getElementById('playlist');
const player = document.getElementById('player');
const trackElements = [];
let isLoggedIn = false;

// ===== Render playlist =====
function renderPlaylist() {
  playlistDiv.innerHTML = "";
  songs.forEach((s,i)=>{
    const div=document.createElement("div");
    div.className="track";
    div.innerHTML=`<span>${s.title}</span><button onclick="playTrack(${i})">Play</button>`;
    playlistDiv.appendChild(div);
    trackElements.push(div);
  });
}
renderPlaylist();

// ===== Music Player functions =====
let current=0;
function load(i){ 
  player.src=songs[i].file; 
  player.play(); 
  highlightTrack(i); 
  updateNowPlaying(i); 
  current=i; 
}
function playTrack(i){ 
  if(!isLoggedIn){ alert("Please login to access the music."); return; }
  load(i); 
}
function next(){ if(!isLoggedIn) return; current=(current+1)%songs.length; load(current); }
function prev(){ if(!isLoggedIn) return; current=(current-1+songs.length)%songs.length; load(current); }
function shuffle(){ if(!isLoggedIn) return; current=Math.floor(Math.random()*songs.length); load(current); }
function loop(){ if(!isLoggedIn) return; player.loop=!player.loop; alert("Repeat "+(player.loop?"ON":"OFF")); }
function toggle(){ if(!isLoggedIn) return; player.paused?player.play():player.pause(); }
function highlightTrack(i){ trackElements.forEach((t,idx)=>{ t.classList.toggle('active',idx===i); }); }
function updateNowPlaying(i){ document.getElementById('songTitle').textContent=songs[i].title; document.getElementById('nowPlaying').classList.add("active"); }
function formatTime(sec){ const m=Math.floor(sec/60); const s=Math.floor(sec%60).toString().padStart(2,"0"); return `${m}:${s}`; }

player.addEventListener('ended',next);
player.addEventListener('timeupdate',()=>{
  if(player.duration){
    const percent=(player.currentTime/player.duration)*100;
    document.getElementById('progress').value=percent;
    document.getElementById('progress').style.background=`linear-gradient(to right,#8000FF ${percent}%,#333 ${percent}%)`;
    document.getElementById('currentTime').textContent=formatTime(player.currentTime);
    document.getElementById('duration').textContent=formatTime(player.duration);
  }
});
document.getElementById('progress').addEventListener('input',()=>{ if(player.duration) player.currentTime=(document.getElementById('progress').value/100)*player.duration; });
document.getElementById('volume').addEventListener('input',()=>{ player.volume=document.getElementById('volume').value; });

// ===== Menu toggle =====
const menuBtn = document.getElementById('menuBtn');
const menuContent = document.getElementById('menuContent');
menuBtn.addEventListener('click',()=>{ menuContent.style.display = menuContent.style.display === 'block' ? 'none' : 'block'; });

// ===== Modal =====
const authModal = document.getElementById('authModal');
const modalContent = document.getElementById('modalContent');
const signupBtn = document.getElementById('signupBtn');
const loginBtn = document.getElementById('loginBtn');

// ===== Utility: show modal =====
function showModal(html){ modalContent.innerHTML = html; authModal.style.display = 'flex'; }

// ===== Sign Up =====
signupBtn.addEventListener('click',()=>{
  showModal(`
    <h2>Sign Up</h2>
    <input type="text" id="signupUsername" placeholder="Username">
    <input type="email" id="signupEmail" placeholder="Email">
    <input type="password" id="signupPassword" placeholder="Password">
    <button id="signupNextBtn">Next</button>
  `);

  document.getElementById('signupNextBtn').addEventListener('click',()=>{
    // Save info temporarily (simulate backend)
    const username = document.getElementById('signupUsername').value;
    const email = document.getElementById('signupEmail').value;
    const password = document.getElementById('signupPassword').value;
    if(!username || !email || !password){ alert("All fields required"); return; }

    // Placeholder: simulate email confirmation
    alert(`Confirmation email sent to ${email}. (Simulation)`);

    // Show subscription step
    showModal(`
      <h2>Subscribe</h2>
      <p>Enter card info to subscribe (simulation)</p>
      <button id="subscribeBtn">Subscribe</button>
    `);

    document.getElementById('subscribeBtn').addEventListener('click',()=>{
      isLoggedIn = true;
      localStorage.setItem('loggedIn', Date.now());
      authModal.style.display = 'none';
      alert("Subscription confirmed! Music unlocked.");
    });
  });
});

// ===== Login =====
loginBtn.addEventListener('click',()=>{
  showModal(`
    <h2>Login</h2>
    <input type="text" id="loginUsername" placeholder="Username">
    <input type="password" id="loginPassword" placeholder="Password">
    <label><input type="checkbox" id="rememberMe"> Remember Me</label>
    <button id="loginSubmit">Login</button>
  `);

  document.getElementById('loginSubmit').addEventListener('click',()=>{
    const username = document.getElementById('loginUsername').value;
    const password = document.getElementById('loginPassword').value;
    if(!username || !password){ alert("Enter username/password"); return; }

    // Placeholder: any username/password works
    isLoggedIn = true;
    if(document.getElementById('rememberMe').checked){
      localStorage.setItem('loggedIn', Date.now());
    }
    authModal.style.display = 'none';
    alert("Login successful! Music unlocked.");
  });
});

// ===== Auto-login if within 24hrs =====
window.addEventListener('load',()=>{
  const lastLogin = localStorage.getItem('loggedIn');
  if(lastLogin && Date.now() - lastLogin < 24*60*60*1000){
    isLoggedIn = true;
    console.log("Auto-login active (within 24hrs)");
  }
});
</script>
</body>
</html>
